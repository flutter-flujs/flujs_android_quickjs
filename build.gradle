group "io.shuttle.flujs"
version "0.6.1"

buildscript {
    repositories {
        google()
        mavenCentral()
    }

    dependencies {
        classpath "com.android.tools.build:gradle:8.1.0"
    }
}

rootProject.allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

apply plugin: "com.android.library"
apply plugin: "maven-publish"

android {
    if (project.android.hasProperty("namespace")) {
        namespace = "io.shuttle.flujs"
    }
    compileSdkVersion 31
    ndkVersion = android.ndkVersion
    defaultConfig {
        minSdk = 16
    }
    flavorDimensions "abi"
    productFlavors {
        x86 {
            dimension "abi"
        }
        arm {
            dimension "abi"
        }
    }
    sourceSets {
        arm.jniLibs.srcDirs += "src/arm/jniLibs"
        x86.jniLibs.srcDirs += "src/x86/jniLibs"
    }
}

publishing {
    repositories {
        maven {
            name = "quickjs"
            url = "https://maven.pkg.github.com/flutter-flujs/flujs_android_quickjs"
            credentials {
                username = System.getenv("GITHUB_ACTOR")
                password = System.getenv("GITHUB_TOKEN")
            }
        }
    }
}